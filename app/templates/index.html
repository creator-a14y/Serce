<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serce AI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #f0f2f5; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; }
        #chat-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 75%; padding: 12px 16px; border-radius: 18px; font-size: 15px; animation: fadeIn 0.3s; }
        .user { align-self: flex-end; background: #0084ff; color: white; border-bottom-right-radius: 2px; }
        .bot { align-self: flex-start; background: white; color: #1c1e21; border-bottom-left-radius: 2px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .input-area { background: white; padding: 20px; border-top: 1px solid #ddd; }
        .wrapper { max-width: 700px; margin: auto; display: flex; gap: 10px; }
        input { border-radius: 25px !important; border: 1px solid #ddd !important; padding: 10px 20px !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .debug-btn { position: fixed; bottom: 5px; right: 5px; color: #ccc; text-decoration: none; font-size: 10px; }
    </style>
</head>
<body>

<div id="chat-container">
    <div class="msg bot">Merhaba! Ben Serce. Sana nasƒ±l yardƒ±mcƒ± olabilirim? üê¶</div>
</div>

<div class="input-area">
    <div class="wrapper">
        <input type="text" id="user-input" class="form-control" placeholder="Bir mesaj yazƒ±n..." onkeypress="if(event.key === 'Enter') send()">
        <button onclick="send()" class="btn btn-primary rounded-circle"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
</div>

<a href="/debug" class="debug-btn">Y√∂netim</a>

<script>
    async function send() {
        const input = document.getElementById('user-input');
        const box = document.getElementById('chat-container');
        if(!input.value.trim()) return;

        box.innerHTML += `<div class="msg user">${input.value}</div>`;
        const text = input.value;
        input.value = '';
        box.scrollTop = box.scrollHeight;

        const res = await fetch('/get?msg=' + encodeURIComponent(text));
        const data = await res.json();
        
        setTimeout(() => {
            box.innerHTML += `<div class="msg bot">${data.response}</div>`;
            box.scrollTop = box.scrollHeight;
        }, 300);
    }
</script>
</body>
</html>
