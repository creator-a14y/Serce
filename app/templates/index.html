<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serce AI - AkÄ±llÄ± Asistan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-color: #0084ff; --bg-color: #f4f7f6; }
        body { background-color: var(--bg-color); font-family: 'Inter', sans-serif; height: 100vh; display: flex; align-items: center; }
        .chat-card { width: 100%; max-width: 450px; height: 85vh; background: white; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); display: flex; flex-direction: column; margin: auto; }
        .chat-header { background: var(--main-color); color: white; padding: 20px; border-radius: 20px 20px 0 0; display: flex; align-items: center; gap: 15px; }
        .chat-header i { font-size: 24px; }
        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth; }
        
        /* Mesaj BalonlarÄ± */
        .msg { padding: 12px 16px; border-radius: 15px; max-width: 80%; font-size: 14px; position: relative; animation: fadeIn 0.3s ease; }
        .user-msg { background: var(--main-color); color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .bot-msg { background: #e9ecef; color: #2d3436; align-self: flex-start; border-bottom-left-radius: 2px; }
        
        .input-group { padding: 20px; border-top: 1px solid #eee; background: white; border-radius: 0 0 20px 20px; }
        input { border-radius: 25px !important; border: 1px solid #ddd !important; padding: 12px 20px !important; }
        .send-btn { background: var(--main-color); color: white; border-radius: 50% !important; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border: none; transition: 0.3s; }
        .send-btn:hover { transform: scale(1.1); background: #0073e6; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="chat-card">
    <div class="chat-header">
        <i class="fa-solid fa-dove"></i>
        <div>
            <h6 class="m-0">Serce AI</h6>
            <small style="opacity: 0.8;">Ã‡evrimiÃ§i Asistan</small>
        </div>
    </div>

    <div id="chat-box">
        <div class="msg bot-msg">Merhaba! Ben Serce. Size nasÄ±l yardÄ±mcÄ± olabilirim? ğŸ¦</div>
    </div>

    <div class="input-group">
        <input type="text" id="user-input" class="form-control" placeholder="Bir mesaj yazÄ±n..." onkeypress="if(event.key === 'Enter') sendMessage()">
        <button class="send-btn" onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
</div>

<script>
    async function sendMessage() {
        const input = document.getElementById('user-input');
        const box = document.getElementById('chat-box');
        const text = input.value.trim();
        if(!text) return;

        // KullanÄ±cÄ± mesajÄ±
        box.innerHTML += `<div class="msg user-msg">${text}</div>`;
        input.value = '';
        box.scrollTop = box.scrollHeight;

        try {
            const response = await fetch('/get?msg=' + encodeURIComponent(text));
            const data = await response.json();
            
            // Bot cevabÄ±
            setTimeout(() => {
                box.innerHTML += `<div class="msg bot-msg">${data.response}</div>`;
                box.scrollTop = box.scrollHeight;
            }, 500);
        } catch (e) {
            box.innerHTML += `<div class="msg bot-msg text-danger">BaÄŸlantÄ± hatasÄ±!</div>`;
        }
    }
</script>

</body>
</html>
